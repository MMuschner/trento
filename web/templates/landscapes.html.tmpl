{{ define "content" }}
<div class="col">
    <h6><a href="/environments">Environments</a> > {{ .EnvName }}</h6>
    <h1>Landscapes</h1>
    <div class='table-responsive'>
        <table class='table eos-table'>
            <thead>
                <tr>
                    <th scope='col'>Landscape</th>
                    <th scope='col'>SAP systems number</th>
                    <th scope='col'>Hosts number</th>
                    <th scope='col'>Status</th>
                </tr>
            </thead>
            <tbody>
                {{ $EnvName := .EnvName }}
                {{ $Env := index .Environments .EnvName }}
                {{- range $Env.Landscapes }}
                <tr class='clickable' onclick="window.location='/environments/{{ $EnvName }}/landscapes/{{ .Name }}'">
                    <td>{{ .Name }}</td>
                    {{- $SAPSystemNumber := 0 }}
                    {{- $HostsNumber := 0 }}
                    {{- $SAPSystemNumber = sum $SAPSystemNumber (len .SAPSystems) }}
                    {{- range .SAPSystems }}
                    {{- $HostsNumber = sum $HostsNumber (len .Hosts) }}
                    {{- end }}
                    <td>{{ $SAPSystemNumber }}</td>
                    <td>{{ $HostsNumber }}</td>
                    <td>
                        {{- $Health := .Health }}
                        {{- /* It would be nice to show the summary of the the health as tooltip. How many passing, critical and warning in a nice an visual way */ -}}
                        <span class='badge badge-pill badge-{{ if eq $Health.Health "passing" }}primary{{ else if eq $Health.Health "warning" }}warning{{ else }}danger{{ end }}'>{{ $Health.Health }}</span>
                    </td>
                </tr>
                {{- end }}
            </tbody>
        </table>
    </div>
</div>
{{ end }}
