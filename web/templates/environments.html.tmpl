{{ define "content" }}
<div class="col">
    <h1>Environments</h1>
    <div class='table-responsive'>
        <table class='table eos-table'>
            <thead>
                <tr>
                    <th scope='col'>Environmemt</th>
                    <th scope='col'>Landscapes number</th>
                    <th scope='col'>SAP systems number</th>
                    <th scope='col'>Hosts number</th>
                    <th scope='col'>Status</th>
                </tr>
            </thead>
            <tbody>
                {{- range .Environments }}
                <tr class='clickable' onclick="window.location='/environments/{{ .Name }}'">
                    <td>{{ .Name }}</td>
                    <td>{{ len .Landscapes }}</td>
                    {{- $SAPSystemNumber := 0 }}
                    {{- $HostsNumber := 0 }}
                    {{- range .Landscapes }}
                    {{- $SAPSystemNumber = sum $SAPSystemNumber (len .SAPSystems) }}
                    {{- range .SAPSystems }}
                    {{- $HostsNumber = sum $HostsNumber (len .Hosts) }}
                    {{- end }}
                    {{- end }}
                    <td>{{ $SAPSystemNumber }}</td>
                    <td>{{ $HostsNumber }}</td>
                    <td>
                        {{- $Health := "passing" }}
                        <span class='badge badge-pill badge-{{ if eq $Health "passing" }}primary{{ else if eq $Health "warning" }}warning{{ else }}danger{{ end }}'>{{ $Health }} (hardcoded)</span>
                    </td>
                </tr>
                {{- end }}
            </tbody>
        </table>
    </div>
</div>
{{ end }}
